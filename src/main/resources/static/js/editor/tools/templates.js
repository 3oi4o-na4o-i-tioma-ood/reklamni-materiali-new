// Font size is in mm

const templates = [
    [
        {
            alignment: "LEFT",
            id: "company_name",
            position: {
                x: 7,
                y: 7
            },
            size: {
                w: 50
            }
        },
        {
            alignment: "LEFT",
            id: "moto",
            position: {
                x: 7,
                y: 12.5
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "name",
            position: {
                x: 7,
                y: 17.75
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "role",
            position: {
                x: 7,
                y: 22.5
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "address1",
            position: {
                x: 7,
                y: 28
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "address2",
            position: {
                x: 7,
                y: 31
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "phone_1",
            position: {
                x: 7,
                y: 34
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "phone_2",
            position: {
                x: 7,
                y: 37
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "email",
            position: {
                x: 7,
                y: 40
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "web",
            position: {
                x: 7,
                y: 43
            },
            size: {
                w: 40
            }
        }
    ],
    [
        {
            alignment: "CENTER",
            id: "company_name",
            position: {
                x: 7,
                y: 7
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "moto",
            position: {
                x: 7,
                y: 12.5
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "name",
            position: {
                x: 7,
                y: 17.75
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "role",
            position: {
                x: 7,
                y: 22.5
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "address1",
            position: {
                x: 7,
                y: 28
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "address2",
            position: {
                x: 7,
                y: 31
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "phone_1",
            position: {
                x: 7,
                y: 34
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "phone_2",
            position: {
                x: 7,
                y: 37
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "email",
            position: {
                x: 7,
                y: 40
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "web",
            position: {
                x: 7,
                y: 43
            },
            size: {
                w: 80
            }
        }
    ],
    [
        {
            alignment: "RIGHT",
            id: "company_name",
            position: {
                x: 37,
                y: 7
            },
            size: {
                w: 50
            }
        },
        {
            alignment: "RIGHT",
            id: "moto",
            position: {
                x: 47,
                y: 12.5
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "name",
            position: {
                x: 47,
                y: 17.75
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "role",
            position: {
                x: 47,
                y: 22.5
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "address1",
            position: {
                x: 47,
                y: 28
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "address2",
            position: {
                x: 47,
                y: 31
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "phone_1",
            position: {
                x: 47,
                y: 34
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "phone_2",
            position: {
                x: 47,
                y: 37
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "email",
            position: {
                x: 47,
                y: 40
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "web",
            position: {
                x: 47,
                y: 43
            },
            size: {
                w: 40
            }
        }
    ],
    [
        {
            alignment: "CENTER",
            id: "company_name",
            position: {
                x: 7,
                y: 23
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "CENTER",
            id: "moto",
            position: {
                x: 7,
                y: 29
            },
            size: {
                w: 80
            }
        },
        {
            alignment: "LEFT",
            id: "name",
            position: {
                x: 7,
                y: 7
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "role",
            position: {
                x: 7,
                y: 12
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "address1",
            position: {
                x: 7,
                y: 40
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "address2",
            position: {
                x: 7,
                y: 43
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "phone_1",
            position: {
                x: 47,
                y: 40
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "phone_2",
            position: {
                x: 47,
                y: 43
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "email",
            position: {
                x: 47,
                y: 7
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "web",
            position: {
                x: 47,
                y: 10
            },
            size: {
                w: 40
            }
        }
    ],
    [
        {
            alignment: "LEFT",
            id: "company_name",
            position: {
                x: 7,
                y: 25
            },
            size: {
                w: 50
            }
        },
        {
            alignment: "LEFT",
            id: "moto",
            position: {
                x: 7,
                y: 31
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "name",
            position: {
                x: 7,
                y: 38
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "role",
            position: {
                x: 7,
                y: 43
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "address1",
            position: {
                x: 47,
                y: 7
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "address2",
            position: {
                x: 47,
                y: 10
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "phone_1",
            position: {
                x: 47,
                y: 13
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "phone_2",
            position: {
                x: 47,
                y: 16
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "email",
            position: {
                x: 47,
                y: 19
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "web",
            position: {
                x: 47,
                y: 22
            },
            size: {
                w: 40
            }
        }
    ],
    [
        {
            alignment: "RIGHT",
            id: "company_name",
            position: {
                x: 37,
                y: 25
            },
            size: {
                w: 50
            }
        },
        {
            alignment: "RIGHT",
            id: "moto",
            position: {
                x: 47,
                y: 31
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "name",
            position: {
                x: 47,
                y: 38
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "RIGHT",
            id: "role",
            position: {
                x: 47,
                y: 43
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "address1",
            position: {
                x: 7,
                y: 7
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "address2",
            position: {
                x: 7,
                y: 10
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "phone_1",
            position: {
                x: 7,
                y: 13
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "phone_2",
            position: {
                x: 7,
                y: 16
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "email",
            position: {
                x: 7,
                y: 19
            },
            size: {
                w: 40
            }
        },
        {
            alignment: "LEFT",
            id: "web",
            position: {
                x: 7,
                y: 22
            },
            size: {
                w: 40
            }
        }
    ]
]

const templatesTool = {
    getButtons() {
        const container = document.getElementById("editor-templates-container")

        const buttons = container.getElementsByTagName("button")

        return [...buttons]
    },
    selectActive(index) {

        const buttons = templatesTool.getButtons()

        for (const i in buttons) {
            const button = buttons[i]

            if (Number(i) === Number(index)) {
                button.classList.add("active")
            }
            else {
                button.classList.remove("active")
            }
        }
    },
    updateElements(elements, activeTemplate) {
        return elements.map(element => {
            const templateElement = activeTemplate.find(templateEl => templateEl.id === element.id)

            if (!templateElement) {
                return element
            }

            return {
                ...element,
                ...templateElement
            }
        })
    },
    init() {
        const buttons = templatesTool.getButtons()


        for (const i in buttons) {
            const index = Number(i)
            const button = buttons[index]

            button.addEventListener("click", () => {
                templatesTool.selectActive(index)

                const updatedElements = this.updateElements(editor.getElements(), templates[index])

                editor.setElements(updatedElements)

                renderElements.rerenderElements(updatedElements, editor.canvasPxPerProductMM)

            })
        }
    }
}